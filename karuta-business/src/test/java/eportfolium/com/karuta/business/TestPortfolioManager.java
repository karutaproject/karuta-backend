package eportfolium.com.karuta.business;

import static org.junit.Assert.assertEquals;

import java.io.FileNotFoundException;
import java.io.StringReader;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

import javax.xml.parsers.DocumentBuilderFactory;

import org.apache.commons.lang3.RandomStringUtils;
import org.apache.commons.lang3.math.NumberUtils;
import org.junit.Assert;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.util.MimeTypeUtils;
import org.w3c.dom.bootstrap.DOMImplementationRegistry;
import org.w3c.dom.ls.DOMImplementationLS;
import org.w3c.dom.ls.LSSerializer;
import org.xml.sax.InputSource;

import eportfolium.com.karuta.business.contract.PortfolioManager;
import eportfolium.com.karuta.consumer.contract.dao.GroupRightInfoDao;
import eportfolium.com.karuta.consumer.contract.dao.PortfolioDao;
import eportfolium.com.karuta.model.bean.GroupRightInfo;
import eportfolium.com.karuta.model.bean.GroupRights;
import eportfolium.com.karuta.model.bean.Portfolio;
import eportfolium.com.karuta.model.exception.BusinessException;
import eportfolium.com.karuta.model.exception.DoesNotExistException;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:application-context-mysql-test.xml")
public class TestPortfolioManager {

	/**
	 * Pretty-prints XML, supplied as a string.
	 * <p/>
	 * eg. <code>
	 * String formattedXml = new XmlFormatter().format("<tag><nested>hello</nested></tag>");
	 * </code>
	 */
	class XmlFormatter {

		public String format(String xml) {

			try {
				final InputSource src = new InputSource(new StringReader(xml));
				final org.w3c.dom.Node document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(src)
						.getDocumentElement();
				final Boolean keepDeclaration = Boolean.valueOf(xml.startsWith("<?xml"));

				// May need this:
				// System.setProperty(DOMImplementationRegistry.PROPERTY,"com.sun.org.apache.xerces.internal.dom.DOMImplementationSourceImpl");

				final DOMImplementationRegistry registry = DOMImplementationRegistry.newInstance();
				final DOMImplementationLS impl = (DOMImplementationLS) registry.getDOMImplementation("LS");
				final LSSerializer writer = impl.createLSSerializer();

				writer.getDomConfig().setParameter("format-pretty-print", Boolean.TRUE); // Set this to true if the
																							// output needs to be
																							// beautified.
				writer.getDomConfig().setParameter("xml-declaration", keepDeclaration); // Set this to true if the
																						// declaration is needed to be
																						// outputted.

				return writer.writeToString(document);
			} catch (Exception e) {
				throw new RuntimeException(e);
			}
		}
	}

	private final String xmlPortfolio = "<portfolio code=\"0\" id=\"89f2ffd2-db6e-4bb3-bf68-188a18d05656\" owner=\"true\"><version>4</version><asmRoot delete=\"Y\" id=\"26fb4189-e58c-41c8-8fd1-38157da80510\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2020-01-05 11:33:15.0\" xsi_type=\"asmRoot\"><metadata-wad seenoderoles=\"nearly-all\" /><metadata-epm height=\"1400px\" left=\"1400\" top=\"1400\" width=\"1400px\" /><metadata semantictag=\"karuta-components\" sharedNode=\"Y\" sharedNodeResource=\"N\" /><asmResource contextid=\"26fb4189-e58c-41c8-8fd1-38157da80510\" id=\"8dd8db58-eb8a-4996-a525-35173c337e1d\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"nodeRes\"><code>karuta.karuta-resources</code><label lang=\"en\">KARUTA - Resources (2016/03/24)</label><label lang=\"fr\">KARUTA - Ressources (2016/03/24)</label></asmResource><asmResource contextid=\"26fb4189-e58c-41c8-8fd1-38157da80510\" id=\"6fd51190-35ab-42ec-967b-53f18b32c170\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmStructure delete=\"Y\" id=\"6b133b85-e159-4b79-b96c-08ab64e4f1f4\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2019-12-20 17:49:17.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" semantictag=\"asmStructure\" sharedNode=\"N\" sharedNodeResource=\"N\" /><asmResource contextid=\"6b133b85-e159-4b79-b96c-08ab64e4f1f4\" id=\"35fdc7fc-9c4f-402d-b3f5-94302fb6851e\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\">Nouvelle Section</label><label lang=\"en\">New Section</label></asmResource><asmResource contextid=\"6b133b85-e159-4b79-b96c-08ab64e4f1f4\" id=\"a794fac7-d871-4651-9233-dfc2335894ff\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource></asmStructure><asmUnit delete=\"Y\" id=\"bdfbae8d-78d4-4ebe-a074-d24433f0cfa0\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"asmUnit\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" semantictag=\"asmUnit\" sharedNode=\"N\" sharedNodeResource=\"N\" /><asmResource contextid=\"bdfbae8d-78d4-4ebe-a074-d24433f0cfa0\" id=\"07c3374d-4487-4eaa-b65d-ecf39576ec43\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\">Nouvelle Page</label><label lang=\"en\">New Page</label></asmResource><asmResource contextid=\"bdfbae8d-78d4-4ebe-a074-d24433f0cfa0\" id=\"633ef208-6d63-4be0-b794-09209eca5a77\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource></asmUnit><asmUnitStructure delete=\"Y\" id=\"76e4fb9c-619b-4bef-9cc8-d0e812b364e5\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"asmUnitStructure\"><metadata-wad collapsible=\"Y\" seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" semantictag=\"asmUnitStructure\" sharedNode=\"N\" sharedNodeResource=\"N\" /><asmResource contextid=\"76e4fb9c-619b-4bef-9cc8-d0e812b364e5\" id=\"a3f8c962-e053-4151-a4ed-109ea1c6c009\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\">Nouvelle Sous-section</label><label lang=\"en\">New Subsection</label></asmResource><asmResource contextid=\"76e4fb9c-619b-4bef-9cc8-d0e812b364e5\" id=\"ae1cdbe4-ba95-42b3-9170-b6e2cdfdc011\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource></asmUnitStructure><asmUnitStructure delete=\"Y\" id=\"121da77d-d42f-4d5e-bfc8-9020720e1bbd\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"asmUnitStructure\"><metadata-wad collapsible=\"Y\" seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" semantictag=\"asmColumn\" sharedNode=\"N\" sharedNodeResource=\"N\" /><asmResource contextid=\"121da77d-d42f-4d5e-bfc8-9020720e1bbd\" id=\"a6710278-cf82-4d1b-8d33-7464fb61a794\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\">Nouvelle colonne</label><label lang=\"en\">New Column</label></asmResource><asmResource contextid=\"121da77d-d42f-4d5e-bfc8-9020720e1bbd\" id=\"d251275c-3033-4951-b028-bfb0cb9dd991\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource></asmUnitStructure><asmContext delete=\"Y\" id=\"8287020e-7955-493a-9ada-ba95a4434145\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"TextField\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"8287020e-7955-493a-9ada-ba95a4434145\" id=\"72dac057-60ed-41e6-b134-ec9933f2c35b\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"8287020e-7955-493a-9ada-ba95a4434145\" id=\"358adb59-e4fc-4126-906d-d4cc04a43063\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"8287020e-7955-493a-9ada-ba95a4434145\" id=\"ed3dc207-1a38-403f-af91-480939da6ccd\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"null\"><lastmodified/><text lang=\"fr\"/><text lang=\"en\"/></asmResource></asmContext><asmContext delete=\"Y\" id=\"afdf25a6-64b8-4ea9-a87a-ab571f76f841\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Field\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"afdf25a6-64b8-4ea9-a87a-ab571f76f841\" id=\"976515cd-03dd-4d51-8268-4d01ce51367e\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"afdf25a6-64b8-4ea9-a87a-ab571f76f841\" id=\"4fd02dfa-e907-49e3-ad7e-64c635a26ba8\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"afdf25a6-64b8-4ea9-a87a-ab571f76f841\" id=\"424b66ba-3c4b-4bcd-ac59-c5938e6e786b\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"null\"><lastmodified/><text lang=\"fr\"/><text lang=\"en\"/></asmResource></asmContext><asmContext delete=\"Y\" id=\"34075915-461e-46c7-acff-e982a766b073\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Color\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"34075915-461e-46c7-acff-e982a766b073\" id=\"7f519102-b231-4f86-9790-bc8108ed5211\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"34075915-461e-46c7-acff-e982a766b073\" id=\"fc758270-844c-457d-9f48-27f21b8dcc2f\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"34075915-461e-46c7-acff-e982a766b073\" id=\"fbaa41b4-94d0-44e2-b50f-361fb8b1ca59\" last_modif=\"2016-07-18 22:22:32.0\" xsi_type=\"null\"><lastmodified/><text lang=\"fr\"/><text lang=\"en\"/></asmResource></asmContext><asmContext delete=\"Y\" id=\"95fc6b81-7bf1-4b61-8cf9-67919963c565\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Document\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"95fc6b81-7bf1-4b61-8cf9-67919963c565\" id=\"fb493c9c-f264-4b8f-acbe-853471edca15\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"95fc6b81-7bf1-4b61-8cf9-67919963c565\" id=\"67f5e579-844b-4ab8-ae7b-460081c62781\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"95fc6b81-7bf1-4b61-8cf9-67919963c565\" id=\"6b6974ae-526f-4531-9a08-3420edea9378\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"null\"><lastmodified/><filename lang=\"fr\"/><size lang=\"fr\"/><type lang=\"fr\"/><fileid lang=\"fr\"/><filename lang=\"en\"/><size lang=\"en\"/><type lang=\"en\"/><fileid lang=\"en\"/></asmResource></asmContext><asmContext delete=\"Y\" id=\"fcd9fa3f-b9a9-4de7-814a-5a1fc41b58b3\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Video\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"fcd9fa3f-b9a9-4de7-814a-5a1fc41b58b3\" id=\"8175c721-cfd6-4f2d-a172-4573648fae72\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"fcd9fa3f-b9a9-4de7-814a-5a1fc41b58b3\" id=\"0cc20135-514d-4ecd-b1e1-a1acefd81c3c\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"fcd9fa3f-b9a9-4de7-814a-5a1fc41b58b3\" id=\"707b0fd7-c593-47ce-bf31-cc94dc5acd71\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"null\"><lastmodified/><filename lang=\"fr\"/><size lang=\"fr\"/><type lang=\"fr\"/><fileid lang=\"fr\"/><filename lang=\"en\"/><size lang=\"en\"/><type lang=\"en\"/><fileid lang=\"en\"/></asmResource></asmContext><asmContext delete=\"Y\" id=\"ae290604-b051-4776-adc2-8dc18721bcec\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"URL\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"ae290604-b051-4776-adc2-8dc18721bcec\" id=\"01edb9f7-95c8-417a-a312-deafb831ab22\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"ae290604-b051-4776-adc2-8dc18721bcec\" id=\"04df9da0-071a-4747-aa17-d7d71826edb0\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"ae290604-b051-4776-adc2-8dc18721bcec\" id=\"acb7bc97-655b-4282-b6dd-d3109f145824\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"null\"><lastmodified/><label lang=\"fr\"/><label lang=\"en\"/><url lang=\"fr\"/><url lang=\"en\"/></asmResource></asmContext><asmContext delete=\"Y\" id=\"730e94bd-611c-49b4-ba5b-ce78c34add0c\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Oembed\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"730e94bd-611c-49b4-ba5b-ce78c34add0c\" id=\"f3bba309-1b51-49e9-bd6b-179b7b3cb32e\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"730e94bd-611c-49b4-ba5b-ce78c34add0c\" id=\"553730ab-9ec0-4fc5-99df-52d237afd594\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"730e94bd-611c-49b4-ba5b-ce78c34add0c\" id=\"c1ba1b00-6ad1-4c4d-b00c-91a191502e76\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"null\"><lastmodified/><url lang=\"fr\"/><url lang=\"en\"/></asmResource></asmContext><asmContext delete=\"Y\" id=\"ed345f0d-24ac-4d3f-9b76-2d68331d3f8e\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Calendar\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"ed345f0d-24ac-4d3f-9b76-2d68331d3f8e\" id=\"3a01f301-af11-4ea3-a9d2-581a2404c42a\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"ed345f0d-24ac-4d3f-9b76-2d68331d3f8e\" id=\"448e9450-df94-4c4d-9e6d-7d2670537c49\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"ed345f0d-24ac-4d3f-9b76-2d68331d3f8e\" id=\"8171c39f-9633-4e90-8c89-4be03dd068dd\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"null\"><lastmodified/><minViewMode>days</minViewMode><text lang=\"fr\"/><text lang=\"en\"/><format lang=\"fr\">yyyy/mm/dd</format><format lang=\"en\">yyyy/mm/dd</format></asmResource></asmContext><asmContext delete=\"Y\" id=\"da2c9902-2036-4caf-985e-80bb09082d3c\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm width=\"100\" /><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Image\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"da2c9902-2036-4caf-985e-80bb09082d3c\" id=\"edcd5a2d-5921-4e10-98d5-5eab88342637\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"da2c9902-2036-4caf-985e-80bb09082d3c\" id=\"6a52a9b9-4f95-4950-9bac-89f92302fa0e\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"da2c9902-2036-4caf-985e-80bb09082d3c\" id=\"4aaaa5db-f211-4764-95c7-0193650fdf3e\" last_modif=\"2016-07-18 22:22:33.0\" xsi_type=\"null\"><lastmodified/><filename lang=\"fr\"/><size lang=\"fr\"/><type lang=\"fr\"/><fileid lang=\"fr\"/><filename lang=\"en\"/><size lang=\"en\"/><type lang=\"en\"/><fileid lang=\"en\"/></asmResource></asmContext><asmContext delete=\"Y\" id=\"9f0b4694-40aa-4ac6-b4b6-85f62a0b72a9\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm width=\"100\" /><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Audio\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"9f0b4694-40aa-4ac6-b4b6-85f62a0b72a9\" id=\"6ec9296a-e60d-4980-a9c7-f168bc96331e\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"9f0b4694-40aa-4ac6-b4b6-85f62a0b72a9\" id=\"2c2f0533-7d58-4919-92e1-e29d8ea74608\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"9f0b4694-40aa-4ac6-b4b6-85f62a0b72a9\" id=\"b8f617b7-fe70-4c6f-b72a-a747131ffc28\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"null\"><lastmodified/><filename lang=\"fr\"/><size lang=\"fr\"/><type lang=\"fr\"/><fileid lang=\"fr\"/><filename lang=\"en\"/><size lang=\"en\"/><type lang=\"en\"/><fileid lang=\"en\"/></asmResource></asmContext><asmContext delete=\"Y\" id=\"81ec93ff-61be-4652-b7bc-8c0a857cf71c\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Comments\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"81ec93ff-61be-4652-b7bc-8c0a857cf71c\" id=\"20d7e678-7f6b-4ad7-ad55-54fa33217116\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"81ec93ff-61be-4652-b7bc-8c0a857cf71c\" id=\"bdaa2b87-03c6-4e09-bae3-cd9dc738cdd9\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"81ec93ff-61be-4652-b7bc-8c0a857cf71c\" id=\"288fe9bb-6a04-4d87-a11b-9ea1497c79f1\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"null\"><lastmodified/><author/><date/><text lang=\"fr\"/><text lang=\"en\"/></asmResource></asmContext><asmContext delete=\"Y\" id=\"284376cf-5ea7-4f8c-bf63-7a1d6b8e732a\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Get_Resource\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"284376cf-5ea7-4f8c-bf63-7a1d6b8e732a\" id=\"f635dc5a-f653-4262-aad8-592046216fbb\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"284376cf-5ea7-4f8c-bf63-7a1d6b8e732a\" id=\"3a5906a4-56d6-42c6-8c9c-3ff7713a37ae\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"284376cf-5ea7-4f8c-bf63-7a1d6b8e732a\" id=\"ccc4396f-3c63-4589-a90e-0462edd9d6ba\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"null\"><lastmodified/><code/><value/><label lang=\"fr\"/><label lang=\"en\"/></asmResource></asmContext><asmContext delete=\"Y\" id=\"a408dad9-549f-4a28-9744-0e42918c324c\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Get_Get_Resource\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"a408dad9-549f-4a28-9744-0e42918c324c\" id=\"ece3b177-e67c-44a3-aa8e-2a20cd448f38\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"a408dad9-549f-4a28-9744-0e42918c324c\" id=\"b6348a7a-6368-4c0a-b96a-c8241feeff0c\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"a408dad9-549f-4a28-9744-0e42918c324c\" id=\"1735018e-e2fe-4435-b619-863bd41023f4\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"null\"><lastmodified/><code/><portfoliocode/><value/><label lang=\"fr\"/><label lang=\"en\"/></asmResource></asmContext><asmContext delete=\"Y\" id=\"f4cad708-70d5-475f-a927-202ed77c8148\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Get_Double_Resource\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"f4cad708-70d5-475f-a927-202ed77c8148\" id=\"367b1ba0-ce0e-416e-931b-9e8690b13b1d\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"f4cad708-70d5-475f-a927-202ed77c8148\" id=\"03858187-610f-497b-a68a-115e9ec2f166\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"f4cad708-70d5-475f-a927-202ed77c8148\" id=\"2e4a9cc3-a274-494e-b601-9cc9a37f1456\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"null\"><lastmodified/><value1/><code1/><label1 lang=\"fr\"/><label1 lang=\"en\"/><value2/><code2/><label2 lang=\"fr\"/><label2 lang=\"en\"/></asmResource></asmContext><asmContext delete=\"Y\" id=\"c6c94523-a442-4da8-a4e6-97467c029ca1\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Proxy\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"c6c94523-a442-4da8-a4e6-97467c029ca1\" id=\"6f03af0b-4dce-4020-8fc1-48685f05919d\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"nodeRes\"><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"c6c94523-a442-4da8-a4e6-97467c029ca1\" id=\"e9b897d3-bad3-4d71-ab13-ecb028d6cc35\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"c6c94523-a442-4da8-a4e6-97467c029ca1\" id=\"b8006ed0-77de-4545-9aab-f1ba4de3421f\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"null\"><lastmodified/><code/><value/><label lang=\"fr\"/><label lang=\"en\"/></asmResource></asmContext><asmContext delete=\"Y\" id=\"ad100897-6b1c-4ebe-b8d4-51c78e7f8473\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Item\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"ad100897-6b1c-4ebe-b8d4-51c78e7f8473\" id=\"f8d61be0-ef3e-4241-bd5f-d9bc2eb53a6e\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"ad100897-6b1c-4ebe-b8d4-51c78e7f8473\" id=\"5cc4b37e-dd2d-4572-9d64-d5d45b6b3297\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"ad100897-6b1c-4ebe-b8d4-51c78e7f8473\" id=\"0494380f-ce69-406e-a136-4d2df02f7859\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"null\"><lastmodified/><code/><value/><label lang=\"fr\"/><label lang=\"en\"/></asmResource></asmContext><asmContext delete=\"Y\" id=\"d4f10d93-c0b4-414f-b4ad-da23ac332aa1\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2020-01-03 18:14:37.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"SendEmail\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"d4f10d93-c0b4-414f-b4ad-da23ac332aa1\" id=\"71c245d5-cd31-470d-958d-30751b817c75\" last_modif=\"2016-07-18 22:22:34.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\">Envoyez un courriel à</label><label lang=\"en\">Send an email to</label>&gt;</asmResource><asmResource contextid=\"d4f10d93-c0b4-414f-b4ad-da23ac332aa1\" id=\"db37377d-599f-4d83-bdd5-b48d3b0ee5f2\" last_modif=\"2019-12-20 17:27:41.0\" xsi_type=\"context\"><lastmodified/><firstname lang=\"fr\"/><firstname lang=\"en\"/><lastname lang=\"fr\"/><lastname lang=\"en\"/><email lang=\"fr\"/><email lang=\"en\"/></asmResource><asmResource contextid=\"d4f10d93-c0b4-414f-b4ad-da23ac332aa1\" id=\"027900ab-9d77-49e5-a4c7-57c333a1faba\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"null\"><lastmodified/><firstname lang=\"fr\"/><firstname lang=\"en\"/><lastname lang=\"fr\"/><lastname lang=\"en\"/><email lang=\"fr\"/><email lang=\"en\"/></asmResource><metadata delete=\"Y\" id=\"a44fa413-6b80-4cf9-a8bf-d6fbbf466317\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2020-01-03 18:04:07.0\" xsi_type=\"\"><metadata-wad/><metadata-epm/><metadata/></metadata><metadata delete=\"Y\" id=\"1a087d79-fca7-4e57-9f26-83da376ab16b\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2020-01-03 18:14:37.0\" xsi_type=\"\"><metadata-wad/><metadata-epm/><metadata/></metadata></asmContext><asmContext delete=\"Y\" id=\"eb8dbf04-e1c9-481f-8ba8-6d05d20d759b\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2020-01-03 17:14:02.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"SendEmail\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"eb8dbf04-e1c9-481f-8ba8-6d05d20d759b\" id=\"ebbcc385-b3ea-4e03-8c21-0a20ec54a3a6\" xsi_type=\"context\"/></asmContext><asmContext delete=\"Y\" id=\"df2cc9dc-4aa8-4c85-9d93-8f3ead54af61\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2020-01-03 17:14:02.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"SendEmail\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"df2cc9dc-4aa8-4c85-9d93-8f3ead54af61\" id=\"0d71e53d-db9c-4b37-8f5c-775e168a2708\" xsi_type=\"context\"/></asmContext><asmContext delete=\"Y\" id=\"b54e5207-49ea-4951-8dc3-972e47316b33\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2020-01-03 17:14:02.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"URL2Unit\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"b54e5207-49ea-4951-8dc3-972e47316b33\" id=\"23ac0fb2-e9eb-44a7-8635-5c9cd234ceff\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\">Allez à</label><label lang=\"en\">Go to</label></asmResource><asmResource contextid=\"b54e5207-49ea-4951-8dc3-972e47316b33\" id=\"f6754e41-7b3a-494a-a973-12ec42d6d851\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"b54e5207-49ea-4951-8dc3-972e47316b33\" id=\"ac7e814f-2480-48f5-80ad-ede0cdcba135\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"null\"><lastmodified/><local-label lang=\"fr\"/><local-label lang=\"en\"/><label lang=\"fr\"/><label lang=\"en\"/><uuid/></asmResource></asmContext><asmContext delete=\"Y\" id=\"b94461ea-f2a8-429f-8d6a-8017a89f6d4f\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2020-01-03 17:14:02.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Dashboard\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"b94461ea-f2a8-429f-8d6a-8017a89f6d4f\" id=\"aa59e86f-8f29-4cf7-b89b-b901bdcf5e99\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"b94461ea-f2a8-429f-8d6a-8017a89f6d4f\" id=\"81b1df93-f7b3-4c7d-9230-f1d5cc4782a0\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"b94461ea-f2a8-429f-8d6a-8017a89f6d4f\" id=\"67ce44dd-c649-4889-90f4-5f47596c663d\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"null\"><lastmodified/><text lang=\"fr\"/><text lang=\"en\"/><csv>0</csv><pdf>0</pdf></asmResource></asmContext><asmContext delete=\"Y\" id=\"3693b464-6e2b-489d-8fc1-d21526f6fe81\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2020-01-03 17:14:02.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Action\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"3693b464-6e2b-489d-8fc1-d21526f6fe81\" id=\"a6862cef-b893-4670-b1a4-b5cde78879a6\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\">Action</label><label lang=\"en\">Action</label></asmResource><asmResource contextid=\"3693b464-6e2b-489d-8fc1-d21526f6fe81\" id=\"64b75b15-a374-4938-8bf9-9ccd3036cf3e\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"3693b464-6e2b-489d-8fc1-d21526f6fe81\" id=\"26746601-a32d-421a-bc9d-e187d28d5848\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"null\"><lastmodified/><code/><value/><label lang=\"fr\"/><label lang=\"en\"/><role/><action/><action-query/></asmResource></asmContext><asmUnit delete=\"Y\" id=\"4f88befa-42c2-4243-9258-46cf4623372f\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2020-01-03 17:14:02.0\" xsi_type=\"asmUnit\"><metadata-wad contentfreenode=\"Y\" seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" semantictag=\"\" sharedNode=\"N\" sharedNodeResource=\"N\" /><asmResource contextid=\"4f88befa-42c2-4243-9258-46cf4623372f\" id=\"840f7c5a-2d26-45bd-8018-979bd7ee9546\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\">asmUnitStructure_free</label><label lang=\"en\">asmUnitStructure_free</label></asmResource><asmResource contextid=\"4f88befa-42c2-4243-9258-46cf4623372f\" id=\"dab2145e-d9ba-4139-9e50-84fe2756dfb5\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmUnitStructure delete=\"Y\" id=\"64515898-e6d2-4f59-bb5f-5869d0b8a652\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"asmUnitStructure\"><metadata-wad seenoderoles=\"all\" /><metadata-epm height=\"50px\" top=\"30\" width=\"600px\" /><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"asmUnitStructure_free\" sharedNode=\"N\" sharedNodeResource=\"N\" /><asmResource contextid=\"64515898-e6d2-4f59-bb5f-5869d0b8a652\" id=\"97bab166-e5ff-4e0f-8b79-846ace7d70b3\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\">Nouvelle section</label><label lang=\"en\">New Section</label></asmResource><asmResource contextid=\"64515898-e6d2-4f59-bb5f-5869d0b8a652\" id=\"5f8e4859-b38d-4a4d-92ce-429ce5020ffb\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource></asmUnitStructure></asmUnit><asmUnit delete=\"Y\" id=\"1672b835-1398-42cf-a5ea-07997494156a\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2020-01-03 17:14:02.0\" xsi_type=\"asmUnit\"><metadata-wad contentfreenode=\"Y\" seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" semantictag=\"\" sharedNode=\"N\" sharedNodeResource=\"N\" /><asmResource contextid=\"1672b835-1398-42cf-a5ea-07997494156a\" id=\"9cccd6ac-52ff-409d-91b6-54bfd0a3f2fa\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\">TextField_free</label><label lang=\"en\">TextField_free</label></asmResource><asmResource contextid=\"1672b835-1398-42cf-a5ea-07997494156a\" id=\"023f28d5-4061-4a7e-b9b2-7d4e9b6fd208\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmContext delete=\"Y\" id=\"7e2804a1-adaa-498a-9133-7b7735e7282b\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm height=\"50px\" left=\"300\" top=\"30\" width=\"400px\" /><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"TextField_free\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"7e2804a1-adaa-498a-9133-7b7735e7282b\" id=\"b2814c19-9c8b-456f-82ed-f7d67bb3c62c\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"7e2804a1-adaa-498a-9133-7b7735e7282b\" id=\"b0ca6bec-7123-4495-8fc5-1549fe93fe66\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"7e2804a1-adaa-498a-9133-7b7735e7282b\" id=\"3000aa6a-fd60-40bc-b53d-781621242d38\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"null\"><lastmodified/><text lang=\"fr\"/><text lang=\"en\"/></asmResource></asmContext></asmUnit><asmUnit delete=\"Y\" id=\"1f0fb847-a79c-4a7c-a71f-dd5527dbab46\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2020-01-03 17:14:02.0\" xsi_type=\"asmUnit\"><metadata-wad contentfreenode=\"Y\" seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" semantictag=\"\" sharedNode=\"N\" sharedNodeResource=\"N\" /><asmResource contextid=\"1f0fb847-a79c-4a7c-a71f-dd5527dbab46\" id=\"cb8c7671-d102-4ef9-be8b-45961f4a5267\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\">Audio_free</label><label lang=\"en\">Audio_free</label></asmResource><asmResource contextid=\"1f0fb847-a79c-4a7c-a71f-dd5527dbab46\" id=\"07afc584-45d6-48b7-a574-d91299ebe723\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmContext delete=\"Y\" id=\"c0847db3-260d-438c-ab68-52edfabbec60\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm height=\"100px\" left=\"300\" top=\"30\" width=\"400px\" /><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Audio_free\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"c0847db3-260d-438c-ab68-52edfabbec60\" id=\"c0a961a2-acff-4749-a8f0-6d1977ebf585\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"c0847db3-260d-438c-ab68-52edfabbec60\" id=\"3488f613-7257-4d4c-858b-41cdbde72d8d\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"c0847db3-260d-438c-ab68-52edfabbec60\" id=\"7adb420e-5ff8-4a46-8356-c20c91c45e4d\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"null\"><lastmodified/><filename lang=\"fr\"/><size lang=\"fr\"/><type lang=\"fr\"/><fileid lang=\"fr\"/><filename lang=\"en\"/><size lang=\"en\"/><type lang=\"en\"/><fileid lang=\"en\"/></asmResource></asmContext></asmUnit><asmUnit delete=\"Y\" id=\"c0a5f9ec-db75-4a89-91d4-1e4e51fc02b4\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2020-01-03 17:14:02.0\" xsi_type=\"asmUnit\"><metadata-wad contentfreenode=\"Y\" seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" semantictag=\"\" sharedNode=\"N\" sharedNodeResource=\"N\" /><asmResource contextid=\"c0a5f9ec-db75-4a89-91d4-1e4e51fc02b4\" id=\"7e01e615-04bc-433b-ba22-88cfe1942a58\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\">Field_free</label><label lang=\"en\">Field_free</label></asmResource><asmResource contextid=\"c0a5f9ec-db75-4a89-91d4-1e4e51fc02b4\" id=\"abaf5fe8-92a5-4ab8-a541-50e7c76944b1\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmContext delete=\"Y\" id=\"9d012c70-4122-407b-b087-7f16ee8de09b\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm height=\"35px\" left=\"300\" top=\"30\" width=\"400px\" /><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Field_free\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"9d012c70-4122-407b-b087-7f16ee8de09b\" id=\"91813612-3c40-4981-a125-8d718488608c\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"9d012c70-4122-407b-b087-7f16ee8de09b\" id=\"0b1e2a19-9b8d-43ab-8a8a-b128059e118b\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"9d012c70-4122-407b-b087-7f16ee8de09b\" id=\"5ccddd5b-4ef6-4da7-a55f-6c88f8ac0310\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"null\"><lastmodified/><text lang=\"fr\"/><text lang=\"en\"/></asmResource></asmContext></asmUnit><asmUnit delete=\"Y\" id=\"5194cf4a-3599-48dc-ac19-7f8c89094849\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2020-01-03 17:14:02.0\" xsi_type=\"asmUnit\"><metadata-wad contentfreenode=\"Y\" seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" semantictag=\"\" sharedNode=\"N\" sharedNodeResource=\"N\" /><asmResource contextid=\"5194cf4a-3599-48dc-ac19-7f8c89094849\" id=\"9d9bfc3b-3510-47af-b422-95b0eb80612c\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\">Document_free</label><label lang=\"en\">Document_free</label></asmResource><asmResource contextid=\"5194cf4a-3599-48dc-ac19-7f8c89094849\" id=\"e6cadc04-24f5-40a3-8ceb-035d6b794071\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmContext delete=\"Y\" id=\"aa1c3778-60b8-4172-aaad-6d280ab29c96\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm height=\"35px\" left=\"300\" top=\"30\" width=\"400px\" /><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Document_free\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"aa1c3778-60b8-4172-aaad-6d280ab29c96\" id=\"e6baba28-0bd8-44ed-b14f-8a1b62280e57\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"aa1c3778-60b8-4172-aaad-6d280ab29c96\" id=\"f473cdb2-9897-4a99-9768-7ec95564a539\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"aa1c3778-60b8-4172-aaad-6d280ab29c96\" id=\"07435e04-c16a-4b65-b28d-19f65b177b85\" last_modif=\"2016-07-18 22:22:35.0\" xsi_type=\"null\"><lastmodified/><filename lang=\"fr\"/><size lang=\"fr\"/><type lang=\"fr\"/><fileid lang=\"fr\"/><filename lang=\"en\"/><size lang=\"en\"/><type lang=\"en\"/><fileid lang=\"en\"/></asmResource></asmContext></asmUnit><asmUnit delete=\"Y\" id=\"b96e3db0-3b45-4f65-b04e-94ee3dc8b1bb\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2020-01-03 17:14:02.0\" xsi_type=\"asmUnit\"><metadata-wad contentfreenode=\"Y\" seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" semantictag=\"\" sharedNode=\"N\" sharedNodeResource=\"N\" /><asmResource contextid=\"b96e3db0-3b45-4f65-b04e-94ee3dc8b1bb\" id=\"97f99afa-ec9e-4252-b87c-9bc467dd56b5\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\">URL_free</label><label lang=\"en\">URL_free</label></asmResource><asmResource contextid=\"b96e3db0-3b45-4f65-b04e-94ee3dc8b1bb\" id=\"41bb9fe7-f018-413f-98f6-f77bd1267871\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmContext delete=\"Y\" id=\"63a6888c-0a7a-41f5-894f-8b7f80a8151c\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm height=\"35px\" left=\"300\" top=\"30\" width=\"400px\" /><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"URL_free\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"63a6888c-0a7a-41f5-894f-8b7f80a8151c\" id=\"77906410-c738-4ffb-8c50-e8a8aba69b8e\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"63a6888c-0a7a-41f5-894f-8b7f80a8151c\" id=\"234fefd2-22c6-4c53-b746-a92df986eb2c\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"63a6888c-0a7a-41f5-894f-8b7f80a8151c\" id=\"7589c2ac-e1eb-46ad-a407-7d33d3b5a7b3\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"null\"><lastmodified/><label lang=\"fr\"/><label lang=\"en\"/><url lang=\"fr\"/><url lang=\"en\"/></asmResource></asmContext></asmUnit><asmUnit delete=\"Y\" id=\"8924042a-6604-41cc-b02b-88b5a8bd4df1\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2020-01-03 17:14:02.0\" xsi_type=\"asmUnit\"><metadata-wad contentfreenode=\"Y\" seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" semantictag=\"\" sharedNode=\"N\" sharedNodeResource=\"N\" /><asmResource contextid=\"8924042a-6604-41cc-b02b-88b5a8bd4df1\" id=\"cb899523-02e1-4600-9a89-deb10f7c5074\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\">Calendar_free</label><label lang=\"en\">Calendar_free</label></asmResource><asmResource contextid=\"8924042a-6604-41cc-b02b-88b5a8bd4df1\" id=\"1ee11d4f-827f-4c90-9c9e-d63d86ae8ef3\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmContext delete=\"Y\" id=\"ed9f1dc8-4297-4c43-b7ff-2c1dbc817e72\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm height=\"35px\" left=\"300\" top=\"30\" width=\"400px\" /><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Calendar_free\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"ed9f1dc8-4297-4c43-b7ff-2c1dbc817e72\" id=\"992ef8f3-f22b-4026-ab5e-223c8b84810d\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"ed9f1dc8-4297-4c43-b7ff-2c1dbc817e72\" id=\"ddb4f799-189f-46ab-a3d3-9041d1fd78b6\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"ed9f1dc8-4297-4c43-b7ff-2c1dbc817e72\" id=\"cccc09fc-1efc-4bc4-a56c-42c1e4c7d381\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"null\"><lastmodified/><minViewMode>days</minViewMode><text lang=\"fr\"/><text lang=\"en\"/><format lang=\"fr\">yyyy/mm/dd</format><format lang=\"en\">yyyy/mm/dd</format></asmResource></asmContext></asmUnit><asmUnit delete=\"Y\" id=\"346a992e-9e28-461e-9483-436b4617cdc5\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2020-01-03 17:14:02.0\" xsi_type=\"asmUnit\"><metadata-wad contentfreenode=\"Y\" seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" semantictag=\"\" sharedNode=\"N\" sharedNodeResource=\"N\" /><asmResource contextid=\"346a992e-9e28-461e-9483-436b4617cdc5\" id=\"e556698d-f8b3-4cbb-927d-c2a61242785d\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\">Image_free</label><label lang=\"en\">Image_free</label></asmResource><asmResource contextid=\"346a992e-9e28-461e-9483-436b4617cdc5\" id=\"541a7188-de99-49bf-9f79-6c9e38b52520\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmContext delete=\"Y\" id=\"4a67707e-3716-4f86-bc56-37b24fa381e8\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm height=\"100px\" left=\"300\" top=\"30\" width=\"400px\" /><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Image_free\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"4a67707e-3716-4f86-bc56-37b24fa381e8\" id=\"3a340c5c-f9dd-4a86-82e8-8c8285b6872e\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"4a67707e-3716-4f86-bc56-37b24fa381e8\" id=\"a5d8c46b-e3ef-4871-b4dd-a75546c805fb\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"4a67707e-3716-4f86-bc56-37b24fa381e8\" id=\"89a6befb-d439-448d-9b83-afcc86719468\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"null\"><lastmodified/><filename lang=\"fr\"/><size lang=\"fr\"/><type lang=\"fr\"/><fileid lang=\"fr\"/><filename lang=\"en\"/><size lang=\"en\"/><type lang=\"en\"/><fileid lang=\"en\"/></asmResource></asmContext></asmUnit><asmUnit delete=\"Y\" id=\"4a00b5ed-432c-4c67-adef-696b6693d0ae\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2020-01-03 17:14:02.0\" xsi_type=\"asmUnit\"><metadata-wad contentfreenode=\"Y\" seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" semantictag=\"\" sharedNode=\"N\" sharedNodeResource=\"N\" /><asmResource contextid=\"4a00b5ed-432c-4c67-adef-696b6693d0ae\" id=\"736dfded-40b1-4a79-b530-48396ee1c134\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\">Video_free</label><label lang=\"en\">Video_free</label></asmResource><asmResource contextid=\"4a00b5ed-432c-4c67-adef-696b6693d0ae\" id=\"1b9442ef-2317-4f16-a017-9c8b8091a2e2\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmContext delete=\"Y\" id=\"5c4f0a66-ba17-462d-bb5d-745d64b1d5a8\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm height=\"400px\" left=\"300\" top=\"30\" width=\"600px\" /><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"Video_free\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"5c4f0a66-ba17-462d-bb5d-745d64b1d5a8\" id=\"d0e1a61f-00d0-4ea5-8fa7-ec7665c7cfcc\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"nodeRes\"><lastmodified/><code/><label lang=\"fr\"/><label lang=\"en\"/></asmResource><asmResource contextid=\"5c4f0a66-ba17-462d-bb5d-745d64b1d5a8\" id=\"8c273470-2ae9-480b-b59b-db8ff44d20e7\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"context\"><text lang=\"fr\"/><text lang=\"en\"/></asmResource><asmResource contextid=\"5c4f0a66-ba17-462d-bb5d-745d64b1d5a8\" id=\"465c2f00-4f79-43ed-bd8d-cb79ed8872b5\" last_modif=\"2016-07-18 22:22:36.0\" xsi_type=\"null\"><lastmodified/><filename lang=\"fr\"/><size lang=\"fr\"/><type lang=\"fr\"/><fileid lang=\"fr\"/><filename lang=\"en\"/><size lang=\"en\"/><type lang=\"en\"/><fileid lang=\"en\"/></asmResource></asmContext></asmUnit><asmContext delete=\"Y\" id=\"0472af68-3981-4368-ac61-cf8f65b2a102\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2020-01-03 17:14:02.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"SendEmail\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"0472af68-3981-4368-ac61-cf8f65b2a102\" id=\"731ece14-bb29-41ce-bf48-da6f6ac26184\" xsi_type=\"context\"/></asmContext><asmContext delete=\"Y\" id=\"8f373820-5c29-4dc1-a73e-9451de028898\" read=\"Y\" role=\"null\" submit=\"Y\" write=\"Y\" last_modif=\"2020-01-03 17:14:02.0\" xsi_type=\"\"><metadata-wad seenoderoles=\"all\" /><metadata-epm/><metadata multilingual-node=\"Y\" multilingual-resource=\"Y\" semantictag=\"SendEmail\" sharedNode=\"N\" sharedNodeResource=\"N\" sharedResource=\"N\" /><asmResource contextid=\"8f373820-5c29-4dc1-a73e-9451de028898\" id=\"aba6c876-da93-42db-98e2-dfcc2189137c\" xsi_type=\"context\"/></asmContext></asmRoot></portfolio>";

	@Autowired
	private PortfolioManager portfolioManager;

	@Autowired
	private PortfolioDao portfolioDao;

	@Autowired
	private GroupRightInfoDao groupRightInfoDao;

//	public void addPortfolio() throws BusinessException, Exception {
//		
//	}

	@Test
	public void test_everything_one_by_one() throws DoesNotExistException, BusinessException, Exception {
		final String portfolioUuid = "89f2ffd2-db6e-4bb3-bf68-188a18d05656";
//		// final String portfolioUuidCopy = 0cc6be79-45d6-4078-8ac6-0d364b348b97;
		final String nodeUuid = "26fb4189-e58c-41c8-8fd1-38157da80510";
//
//		// S'assurer que le nodeCode corresponde au nodeUuid.
//		String nodeCode = "karuta.karuta-resources";
//
//		// S'assurer que le portfolio existe en base.
//		Portfolio portfolio = portfolioDao.getPortfolio(portfolioUuid);
//		Assert.assertNotNull(portfolio);
//
//		String portfolioByCode = portfolioManager.getPortfolioByCode(MimeTypeUtils.TEXT_XML, nodeCode, 1L, 3L, "t", 0L);
//		System.out.println("PortfolioManager.getPortfolioByCode()");
//		System.out.println(new XmlFormatter().format(portfolioByCode));
//
//		// S'assurer que le noeud fourni est bien rattaché à ce portfolio.
//		String portfolioUuid2 = portfolioManager.getPortfolioUuidFromNode(nodeUuid);
//		Assert.assertEquals(portfolioUuid, portfolioUuid2);
//
//		String roleName = RandomStringUtils.randomAlphabetic(10);
//		String xmlRole = "<role>" + roleName + "</role>";
//		portfolioManager.addRoleInPortfolio(1L, portfolioUuid, xmlRole);
//
//		System.out.println("PortfolioManager.getRoleByPortfolio()");
//		String role = portfolioManager.getRoleByPortfolio(MimeTypeUtils.TEXT_XML, roleName, portfolioUuid, 1L);
//
//		List<GroupRightInfo> griList = groupRightInfoDao.findAll();
//		Collections.sort(griList, new Comparator<GroupRightInfo>() {
//			public int compare(GroupRightInfo o1, GroupRightInfo o2) {
//				return NumberUtils.compare(o1.getId(), o2.getId());
//			}
//		});
//		Assert.assertEquals("grid = " + griList.get(griList.size() - 1).getId(), role);
//
//		String role2 = portfolioManager.getRoleByPortfolio(MimeTypeUtils.TEXT_XML, "designer", portfolioUuid, 1L);
//		Assert.assertEquals("Le grid n'existe pas", role2);
//
//		String roles = portfolioManager.getRolesByPortfolio(portfolioUuid, 1L);
//		System.out.println("PortfolioManager.getRolesByPortfolio()");
//		System.out.println(new XmlFormatter().format(roles));
//
//		// le paramètre "type" dans la méthode addPortfolioGroup() peut prendre comme
//		// valeur soit GROUP ou PORTFOLIO.
//		final Long pgId = portfolioManager.addPortfolioGroup("ATEST", "PORTFOLIO", null, 1L);
//		portfolioManager.addPortfolioInGroup(portfolioUuid, pgId, null, 1L);
//
//		Long pgId2 = portfolioManager.getPortfolioGroupIdFromLabel("ATEST", 1L);
//		Assert.assertEquals(pgId, pgId2);
//
//		String pgList = portfolioManager.getPortfolioGroupList();
//		Assert.assertNotNull(pgList);
//		System.out.println("PortfolioManager.getPortfolioGroupList()");
//		System.out.println(new XmlFormatter().format(pgList));
//
//		String portfolioGroupListFromPort = portfolioManager.getPortfolioGroupListFromPortfolio(portfolioUuid);
//		Assert.assertNotNull(portfolioGroupListFromPort);
//		System.out.println(new XmlFormatter().format(portfolioGroupListFromPort));
//
//		// vérifier si le portfolio fait bien partie du groupe
//		final String portList = portfolioManager.getPortfoliosByPortfolioGroup(pgId);
//		Assert.assertNotEquals("<group id=\"" + pgId + "\"></group>", portList);
//		System.out.println("PortfolioManager.getPortfoliosByPortfolioGroup()");
//		System.out.println(new XmlFormatter().format(portList));
//
//		// retirer le portfolio du groupe
//		final boolean removePortfolioFromPortfolioGroups = portfolioManager
//				.removePortfolioFromPortfolioGroups(portfolioUuid, pgId);
//		Assert.assertTrue(removePortfolioFromPortfolioGroups);
//
//		// supprimer le groupe de portfolios
//		final boolean removePortfolioGroups = portfolioManager.removePortfolioGroups(pgId);
//		Assert.assertTrue(removePortfolioGroups);
//
//		// désactiver le portfolio.
//		portfolioManager.changePortfolioActive(portfolioUuid, Boolean.FALSE);
//		portfolio = portfolioDao.getPortfolio(portfolioUuid);
//		Assert.assertEquals(0, portfolio.getActive());
//
//		// Réactiver le portfolio par une autre méthode du manager de portfolio.
//		portfolioManager.changePortfolioConfiguration(portfolioUuid, Boolean.TRUE, 1L);
//		portfolio = portfolioDao.getPortfolio(portfolioUuid);
//		Assert.assertEquals(1, portfolio.getActive());
//
//		final boolean ownerResult = portfolioManager.isOwner(2L, portfolioUuid);
//		Assert.assertFalse(ownerResult);
//
//		// mettre "sys_public" comme propriétaire.
//		final boolean changeOwnerResult = portfolioManager.changePortfolioOwner(portfolioUuid, 2L);
//		Assert.assertTrue(changeOwnerResult);
//
//		// Évaluer l'appartenance
//		boolean hasRights = portfolioManager.hasRights(2L, portfolioUuid);
//		Assert.assertTrue(hasRights);
//
//		// Vérifier les autres droits partagés
//		boolean hasRights2 = portfolioManager.hasRights(1L, portfolioUuid);
//		Assert.assertTrue(hasRights2);
//
//		final boolean ownerResult2 = portfolioManager.isOwner(2L, portfolioUuid);
//		Assert.assertTrue(ownerResult2);
//
//		// réinitialisation => "root" comme propriétaire.
//		final boolean changeOwnerResult2 = portfolioManager.changePortfolioOwner(portfolioUuid, 1L);
//		Assert.assertTrue(changeOwnerResult2);
//
//		// vérifier si c'est bien le cas en récupérant directement le portfolio.
//		final String getPortfolioResult = portfolioManager.getPortfolio(MimeTypeUtils.TEXT_XML, portfolioUuid, 1L, 3L,
//				"test", null, null, 0L, null);
//		Assert.assertNotNull(getPortfolioResult);
//		System.out.println(new XmlFormatter().format(getPortfolioResult));
//
//		String portShared = portfolioManager.getPortfolioShared(1L);
//		Assert.assertNotNull(portShared);
//		System.out.println(new XmlFormatter().format(portShared));
//
//		// Maj. de la date de modification du portfolio à la date actuelle.
//		final boolean result = portfolioManager.changePortfolioDate(nodeUuid, portfolioUuid);
//		Assert.assertTrue(result);
//
//		GroupRights gr = portfolioManager.getRightsOnPortfolio(1L, 3L, portfolioUuid);
//		Assert.assertNotNull(gr);
//
//		boolean rewriteResult = portfolioManager.rewritePortfolioContent(MimeTypeUtils.TEXT_XML, MimeTypeUtils.TEXT_XML,
//				xmlPortfolio, portfolioUuid, 1L, true);
//		Assert.assertNotNull(rewriteResult);
//
		String code = "karuta.karuta-resources";
		String newCode = "karuta.karuta-resources2";
		String portCopy = portfolioManager.copyPortfolio(MimeTypeUtils.TEXT_XML, portfolioUuid, code, newCode, 1L,
				true);
		System.out.println("A copy (uuid : " + portCopy + ") of portfolio : " + portfolioUuid + " has been created.");
//		portfolioManager.postPortfolioParserights(portCopy, 1L);

		final String xmlPortfolioCopy = portfolioManager.getPortfolio(MimeTypeUtils.TEXT_XML, portCopy, 1L, 3L, "test",
				null, null, 0L, null);

		List<Portfolio> pList = portfolioDao.findAll();
		portfolioManager.removePortfolio(portCopy, 1L, 3L);
		List<Portfolio> pList2 = portfolioDao.findAll();
		assertEquals(pList.size() - 1, pList2.size());

		String addPortfolioResult = portfolioManager.addPortfolio(MimeTypeUtils.TEXT_XML, MimeTypeUtils.TEXT_HTML,
				xmlPortfolioCopy, 1L, 3L, null, 0L, true, "test project");
		System.out.println("PortfolioManager.addPortfolio()");
		System.out.println(new XmlFormatter().format(addPortfolioResult));

		List<Portfolio> pList3 = portfolioDao.findAll();
		portfolioManager.removePortfolio(portCopy, 1L, 3L);
		List<Portfolio> pList4 = portfolioDao.findAll();
		assertEquals(pList3.size() - 1, pList4.size());
	}

	/***************************** NOT TESTED *****************************/
	public void importZippedPortfolio() throws BusinessException, FileNotFoundException, Exception {
	}

	/***************************************
	 * NOT TESTABLE BECAUSE NOT IMPLEMENTED
	 ***************************************/
	public void getPortfolios() {
	}

	public void instanciatePortfolio() {
	}

}
